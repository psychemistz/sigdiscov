% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weights_visium.R
\name{create_weights_visium}
\alias{create_weights_visium}
\title{Create Weight Matrix for Visium}
\usage{
create_weights_visium(
  coords,
  radius,
  type = c("gaussian", "binary"),
  include_self = FALSE,
  platform = c("visium", "old")
)
}
\arguments{
\item{coords}{Spot coordinates. For type="gaussian", should be a data frame
with 'row' and 'col' columns (grid coordinates). For type="binary", can be
any n x 2 matrix of physical coordinates.}

\item{radius}{Numeric. For type="binary", distance threshold in coordinate units.
For type="gaussian", converted to max_radius in grid units (radius / 100).}

\item{type}{Character. Weight type: "gaussian" (default) or "binary".}

\item{include_self}{Logical. Include self-connections (default: FALSE).}

\item{platform}{Character. Platform type for gaussian weights: "visium" (default)
or "old". Only used when type = "gaussian".}
}
\value{
A list with components:
\item{W}{Sparse weight matrix (n x n)}
\item{weight_sum}{Sum of all weights (for normalization)}
}
\description{
Creates a spatial weight matrix for Visium data. Supports both Gaussian
distance decay weights (consistent with pairwise_moran) and binary weights.
}
\details{
Two weight types are supported:

\strong{Gaussian (default)}: Uses the same grid-based Gaussian distance decay as
\code{pairwise_moran()}. Requires grid coordinates (row, col integers).
Uses: \eqn{w_{ij} = exp(-d_{ij}^2 / (2 * 100^2))} where d is computed using
Visium hexagonal grid geometry. This is recommended for consistency with
pairwise Moran's I analysis.

\strong{Binary}: All spots within radius receive equal weight (row-normalized).
\eqn{w_{ij} = 1/n_i} if \eqn{d(i,j) \le r}, else 0.
}
\examples{
\dontrun{
# Parse grid coordinates from spot names
spot_coords <- parse_spot_names(colnames(data))

# Gaussian weights (default, matches pairwise_moran)
W_result <- create_weights_visium(spot_coords, radius = 300, type = "gaussian")

# Binary weights (legacy)
W_result <- create_weights_visium(spot_coords, radius = 300, type = "binary")
}

}
\seealso{
\code{\link{pairwise_moran}}, \code{\link{create_ring_weights_visium}},
\code{\link{create_directional_weights_visium}}
}
